<!DOCTYPE html>

<html>

<head>
	
<!--

WebGL_game.html

Applying a texture and blending

J. Madeira - November 2015

-->
	
<title>WebGL example 29 &mdash; Textures and Blending</title>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

<!--

The vertex and fragment shaders.

-->

<script id="shader-vs" type="x-shader/x-vertex">
	
    attribute vec3 aVertexPosition;
  
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    
    uniform mat4 uPMatrix;

    varying vec2 vTextureCoord;
    
    varying vec3 vLightWeighting;

    void main(void) {
		
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        
        // For the fragment shader
        
        vTextureCoord = aTextureCoord;

        vLightWeighting = vec3(1.0, 1.0, 1.0);
    }
</script>

<script id="shader-fs" type="x-shader/x-fragment">
	
    precision mediump float;

    varying vec2 vTextureCoord;
    
    varying vec3 vLightWeighting;

    uniform float uAlpha;

    uniform sampler2D uSampler;

    uniform vec4 u_color;

    void main(void) {
		
        vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
        
        gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a * uAlpha) * u_color;
    }
    
</script>


<!-- The JS files -->

<!-- Some useful functions for browser compatibility -->

<script type="text/javascript" src="webgl-utils.js"></script>

<!-- Handling vectors and matrices -->

<script type="text/javascript" src="maths.js"></script>

<!-- WebGL code -->

<script type="text/javascript" src="initShaders.js"></script>

<script type="text/javascript" src="WebGL_game.js"></script>

</head>

<body onload="runWebGL();">

	<div style="text-align: center">
		<p id="fps"> fps: </p>
		<canvas id="game_window" style="border: none; alignment: center; margin-top: 2px "></canvas>
				
	</div>

</body>

</html>
